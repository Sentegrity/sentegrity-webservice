version: '2'
services:
    code:
        image: sentegrity/code
        container_name: s_code
        volumes:
            - ~/sentegrity-webservice/src/symfony:/opt/symfony
            - ~/sentegrity-webservice/src/web:/var/www
            - ~/sentegrity-webservice/src/bucket:/var/bucket
        environment:
            - RESOURCES_PATH=/var/bucket/
        tty: true

    php_node:
        image: sentegrity/php-fpm
        container_name: s_php-node
        volumes_from:
            - code
        ports:
            - "9000:9000"

    nginx:
        image: sentegrity/nginx
        container_name: s_loadbalancer
        ports:
            - "80:80"
            - "443:443"
        volumes_from:
            - code
        links:
            - php_node